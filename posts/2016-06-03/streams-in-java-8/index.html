<!doctype html><html lang="en"><head><meta charset="utf-8"><link rel="shortcut icon" href="/favicon.ico"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="theme-color" content="#000000"><meta name="robots" content="index,follow"><meta name="googlebot" content="index,follow"><meta name="rating" content="General"><link rel="alternate" href="https://smddzcy.com/rss.xml" type="application/rss+xml" title="RSS"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="smddzcy.com"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="skype_toolbar" content="skype_toolbar_parser_compatible"><meta name="renderer" content="webkit|ie-comp|ie-stand"><link rel="manifest" href="/manifest.json"><link rel="canonical" href="/posts/2016-06-03/streams-in-java-8" />

    <title data-react-helmet="true">Streams in Java 8</title>
    
    
  <script>window.__NAVI_STATE__={"__navi__":{"requestDataWithoutState":{}}};</script><link href="/static/css/main.6313059b.chunk.css" rel="stylesheet"></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div id="root"><div class="BlogLayout_container__3WeFl"><div class="
        LoadingIndicator_LoadingIndicator__22gHk
        
        undefined
      "></div><header><h3 class="BlogLayout_title__6OZKV"><a href="/" context="[object Object]" class=" ">smddzcy | yet another dev</a></h3></header><main><article><header class="BlogPostLayout_header__2LB8S"><h1 class="BlogPostLayout_title__3g2FG"><a href="/posts/2016-06-03/streams-in-java-8" context="[object Object]" class=" ">Streams in Java 8</a></h1><small><time dateTime="Thu, 02 Jun 2016 21:00:00 GMT">June 3, 2016</time> <!-- -->•<!-- --> <ul class="ArticleMeta_tags__VKe_V"><li><a href="/tags/java" context="[object Object]" class=" ">java</a></li><li><a href="/tags/java8" context="[object Object]" class=" ">java8</a></li><li><a href="/tags/tutorial" context="[object Object]" class=" ">tutorial</a></li><li><a href="/tags/lambda" context="[object Object]" class=" ">lambda</a></li><li><a href="/tags/stream api" context="[object Object]" class=" ">stream api</a></li><li><a href="/tags/functional programming" context="[object Object]" class=" ">functional programming</a></li></ul> <!-- -->•<!-- --> <span>☕️<!-- --> <!-- -->3<!-- --> min read</span></small></header><div class="BlogPostLayout_content__jzLFq"><div><p>Last time I’ve talked about <a href="/posts/2016-05-15/lambdas-in-java-8" title="Lambda Expressions in Java 8" context="[object Object]" class=" ">Lambda Expressions in Java 8</a> and now it’s time to talk about <strong>streams</strong>.</p><p>Lambdas give us the ability to pass behavior by using functional interfaces, which removes the need for extra classes. They are already great; they make the code cleaner and more understandable, but they are greater if we make use of them while creating APIs. An example to such an API is the <strong>Stream API</strong> in <em>JDK 8</em>.</p><p>We use streams to construct a pipeline of operations on a <em>Collection</em>. Let’s take a look at a simple example.</p><pre><code class="language-java" data-language="java" data-highlighted-line-numbers=""><span class="token class-name">List</span> l <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span> <span class="token string">"AB"</span><span class="token punctuation">,</span> <span class="token string">"C"</span><span class="token punctuation">,</span> <span class="token string">"D"</span><span class="token punctuation">,</span> <span class="token string">"EFG"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
l<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>s <span class="token operator">-></span> s<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>s <span class="token operator">-></span> s<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 <span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> s2<span class="token punctuation">)</span> <span class="token operator">-></span> s1<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> s2<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><ul><li><code>stream()</code>: Creates a stream pipeline on the given collection, which is a <code>List</code> in this case.</li><li><code>map(Function)</code>: Applies the given <code>Function</code> on all elements of this stream and returns a new stream. Lambda expression <code>s -&gt; s.toLowerCase()</code> creates a <code>Function</code> to convert all elements to lower-case.</li><li><code>filter(Predicate)</code>: Filters the stream by the given <code>Predicate</code> and returns a new stream. Lambda expression <code>s -&gt; s.contains(&quot;a&quot;)</code> creates a <code>Predicate</code> to filter all elements which contains <em>“a”</em>.</li><li><code>sorted(Comparator)</code>: Sorts all elements of this stream by the given <code>Comparator</code>. Lambda expression <code>(s1, s2) -&gt; s1.length() - s2.length()</code> creates a <code>Comparator</code> to sort all elements by their length in ascending order.</li><li><code>forEach(Consumer)</code>: Performs an action on all elements of this stream. This is a <strong>terminal operation</strong>, which means it doesn’t return a stream. Lambda expression <code>System.out::println</code> creates a <code>Consumer</code> to print all elements line-by-line. This is exactly the same with writing <code>s -&gt; System.out.println(s)</code>, just a shorter form.</li></ul><p>Stream operations can be performed sequentially or in parallel. <strong>One thing to keep in mind is that stream is not a data structure, it is just <em>higher level abstraction</em>.</strong> Streams do not store any data.</p><p>Streams are <strong>lazy</strong>, means they are only computed when accessed. <em>Intermediate operations</em> like <code>map(Function)</code>, <code>filter(Predicate)</code>, <code>sorted(Comparator)</code> actually <strong><em>does nothing</em></strong> until the stream is accessed by a <em>terminal operation</em>, ie. <code>forEach(Consumer)</code> operation on the example shown above. This allows us to produce infinite streams of data.</p><pre><code class="language-java" data-language="java" data-highlighted-line-numbers=""><span class="token class-name">IntStream</span> infiniteStream <span class="token operator">=</span> <span class="token class-name">IntStream</span><span class="token punctuation">.</span><span class="token function">iterate</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> el <span class="token operator">-></span> el <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
                              <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>el <span class="token operator">-></span> el <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>Code shown above creates an infinite integer stream, and filters the odd ones. One might expect that when we execute this code, it will cause an infinite loop, eventually fill the whole memory and then crash. But since the streams are <em>lazy</em> and only evaluated when accessed, this code doesn’t cause any problem. But if we add a terminal operation like this:</p><pre><code class="language-java" data-language="java" data-highlighted-line-numbers=""><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> infiniteStream <span class="token operator">=</span> <span class="token class-name">IntStream</span><span class="token punctuation">.</span><span class="token function">iterate</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> el <span class="token operator">-></span> el <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
                                  <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>el <span class="token operator">-></span> el <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
                                  <span class="token punctuation">.</span><span class="token function">boxed</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                  <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>It <em>does</em> cause an infinite loop and the program eventually crashes with a beautiful exception: <code>Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space</code>.</p><p>By the way, there are so many readily accessible intermediate operations you can use and I simply can’t explain them all, but let me explain the ones I used above.</p><ul><li><code>boxed()</code>: Returns a new stream consisting all elements of this stream boxed to an <code>Integer</code>.</li><li><code>collect(Collector)</code>: Collects all elements of this stream by using the given <code>Collector</code>. The one used above collects this stream to a <code>List</code>.</li></ul><p>This was a simple &amp; quick guide and there is much more to learn. I strongly suggest you to dig into it and learn <em>creating streams from different data sources</em>, <em>parallel streams</em> etc. Next time I’ll be looking at <strong>interface default methods</strong>. Have a good day!</p></div></div><div style="margin-top:3rem"><div id="disqus_thread"></div></div><footer class="BlogPostLayout_footer__2aOsZ"><h3 class="BlogPostLayout_title__3g2FG"><a href="/" context="[object Object]" class=" ">smddzcy | yet another dev</a></h3><div class="
      Bio_Bio__3ifbk
      BlogPostLayout_bio__3d60S
    "><img src="https://pbs.twimg.com/profile_images/781276128673689600/tGOdd3qK_400x400.jpg" alt="Me"/><div><div>software engineer, web enthusiast. shares articles, tutorials and his thoughts on various things.</div><div><a href="https://linkedin.com/in/smddzcy" title="LinkedIn" rel="nofollow noopener noreferrer" target="_blank" style="margin-right:5px">LinkedIn</a>•<a href="https://github.com/smddzcy" title="GitHub" rel="nofollow noopener noreferrer" target="_blank" style="margin:0 5px">GitHub</a>•<a href="https://twitter.com/smddzcy" title="Twitter" rel="nofollow noopener noreferrer" target="_blank" style="margin:0 5px">Twitter</a>•<a href="/cv" title="CV" style="margin:0 5px">CV</a></div></div></div><section class="BlogPostLayout_links__2NwEx"><a class=" " href="/posts/2016-06-08/default-methods-java-8" context="[object Object]">← <!-- -->Default Methods in Java 8</a><a class="BlogPostLayout_next__3Rs3G " href="/posts/2016-05-15/lambdas-in-java-8" context="[object Object]">Lambda Expressions in Java 8<!-- --> →</a></section></footer></article></main></div></div><script>!function(u){function e(e){for(var t,r,n=e[0],o=e[1],c=e[2],a=0,f=[];a<n.length;a++)r=n[a],l[r]&&f.push(l[r][0]),l[r]=0;for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&(u[t]=o[t]);for(p&&p(e);f.length;)f.shift()();return i.push.apply(i,c||[]),d()}function d(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,o=1;o<r.length;o++){var c=r[o];0!==l[c]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=r[0]))}return e}var r={},f={25:0},l={25:0},i=[];function s(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return u[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.e=function(i){var e=[];f[i]?e.push(f[i]):0!==f[i]&&{1:1,13:1}[i]&&e.push(f[i]=new Promise(function(e,n){for(var t="static/css/"+({}[i]||i)+"."+{1:"5cd5b3d4",2:"31d6cfe0",3:"31d6cfe0",4:"31d6cfe0",5:"31d6cfe0",6:"31d6cfe0",7:"31d6cfe0",8:"31d6cfe0",9:"31d6cfe0",10:"31d6cfe0",11:"31d6cfe0",12:"31d6cfe0",13:"baadcaa5",14:"31d6cfe0",15:"31d6cfe0",16:"31d6cfe0",17:"31d6cfe0",18:"31d6cfe0",19:"31d6cfe0",20:"31d6cfe0",21:"31d6cfe0",22:"31d6cfe0",23:"31d6cfe0"}[i]+".chunk.css",o=s.p+t,r=document.getElementsByTagName("link"),c=0;c<r.length;c++){var a=(u=r[c]).getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(a===t||a===o))return e()}var f=document.getElementsByTagName("style");for(c=0;c<f.length;c++){var u;if((a=(u=f[c]).getAttribute("data-href"))===t||a===o)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var t=e&&e.target&&e.target.src||o,r=new Error("Loading CSS chunk "+i+" failed.\n("+t+")");r.request=t,n(r)},d.href=o,document.getElementsByTagName("head")[0].appendChild(d)}).then(function(){f[i]=0}));var r=l[i];if(0!==r)if(r)e.push(r[2]);else{var t=new Promise(function(e,t){r=l[i]=[e,t]});e.push(r[2]=t);var n,o=document.getElementsByTagName("head")[0],c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=s.p+"static/js/"+({}[i]||i)+"."+{1:"055c2081",2:"553f2991",3:"8f1dc44d",4:"b6e18d9b",5:"4bfa3069",6:"bc5baf84",7:"f14e4bed",8:"607692a3",9:"4281e297",10:"9dfc1933",11:"0d2e2503",12:"0032c619",13:"7284ad51",14:"4f65b3d9",15:"1ad5cb3e",16:"b5a573d5",17:"89440bd7",18:"7aa5ab3a",19:"86f4bb8f",20:"c42ed917",21:"a707ecea",22:"ec77ef34",23:"fc2c0f65"}[i]+".chunk.js",n=function(e){c.onerror=c.onload=null,clearTimeout(a);var t=l[i];if(0!==t){if(t){var r=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src,o=new Error("Loading chunk "+i+" failed.\n("+r+": "+n+")");o.type=r,o.request=n,t[1](o)}l[i]=void 0}};var a=setTimeout(function(){n({type:"timeout",target:c})},12e4);c.onerror=c.onload=n,o.appendChild(c)}return Promise.all(e)},s.m=u,s.c=r,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var t=window.webpackJsonp=window.webpackJsonp||[],n=t.push.bind(t);t.push=e,t=t.slice();for(var o=0;o<t.length;o++)e(t[o]);var p=n;d()}([])</script><script src="/static/js/24.973fc531.chunk.js"></script><script src="/static/js/main.982b4a00.chunk.js"></script></body></html>